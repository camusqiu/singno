<!DOCTYPE html>
<html>
  <head>
    <title>金腾盈后台管理系统 - 股吧管理</title>
    <style type="text/css">
      .active
      {
          color: red;
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8" />

    <link rel="icon" type="image/ico" href="http://tattek.com/minimal/assets/images/favicon.ico" />
    <link rel="stylesheet" href="css/global.css" /> 
<link type="text/css" rel="stylesheet" media="all" href="assets/vendor/mmenu/css/jquery.mmenu.all.css" />  
    <link rel="stylesheet" href="../assets/vendor/chosen/css/chosen.min.css">
    <link rel="stylesheet" href="../assets/vendor/chosen/css/chosen-bootstrap.css">
    <link rel="stylesheet" href="../assets/vendor/datepicker/css/bootstrap-datetimepicker.css">
  </head>
  <body class="bg-1">
    <div class="mask"><div id="loader"></div></div>
 

    <!-- Wrap all page content here -->
    <div id="wrap">

      


      <!-- Make page fluid -->
      <div class="row">
        


        <!-- Fixed navbar -->
        <div class="navbar navbar-default navbar-fixed-top navbar-transparent-black mm-fixed-top" role="navigation" id="navbar">
          


          <!-- Branding -->
          <div class="navbar-header col-md-2">
            <a class="navbar-brand" href="index.html">
              <strong>MIN</strong>IMAL
            </a>
            <div class="sidebar-collapse">
              <a href="#">
                <i class="fa fa-bars"></i>
              </a>
            </div>
          </div>
          <!-- Branding end -->


          <!-- .nav-collapse -->
          <div class="navbar-collapse">
                        
            <!-- Page refresh -->
            <ul class="nav navbar-nav refresh">
              <li class="divided">
                <a href="#" class="page-refresh"><i class="fa fa-refresh"></i></a>
              </li>
            </ul>
            <!-- /Page refresh -->

            <!-- Search -->
            <div class="search" id="main-search">
              <i class="fa fa-search"></i> <input type="text" placeholder="Search...">
            </div>
            <!-- Search end -->

            <!-- Quick Actions -->
            <ul class="nav navbar-nav quick-actions">
              
              <li class="dropdown divided">
                
                <a class="dropdown-toggle button" data-toggle="dropdown" href="#">
                  <i class="fa fa-tasks"></i>
                  <span class="label label-transparent-black">2</span>
                </a>

                <ul class="dropdown-menu wide arrow nopadding bordered">
                  <li><h1>You have <strong>2</strong> new tasks</h1></li>
                  <li>
                    <a href="#">
                      <div class="task-info">
                        <div class="desc">Layout</div>
                        <div class="percent">80%</div>
                      </div>
                      <div class="progress progress-striped progress-thin">
                        <div class="progress-bar progress-bar-green" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 80%">
                          <span class="sr-only">40% Complete (success)</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="task-info">
                        <div class="desc">Schemes</div>
                        <div class="percent">15%</div>
                      </div>
                      <div class="progress progress-striped active progress-thin">
                        <div class="progress-bar progress-bar-cyan" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 15%">
                          <span class="sr-only">45% Complete</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="task-info">
                        <div class="desc">Forms</div>
                        <div class="percent">5%</div>
                      </div>
                      <div class="progress progress-striped progress-thin">
                        <div class="progress-bar progress-bar-orange" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 5%">
                          <span class="sr-only">5% Complete (warning)</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="task-info">
                        <div class="desc">JavaScript</div>
                        <div class="percent">30%</div>
                      </div>
                      <div class="progress progress-striped progress-thin">
                        <div class="progress-bar progress-bar-red" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 30%">
                          <span class="sr-only">30% Complete (danger)</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <a href="#">
                      <div class="task-info">
                        <div class="desc">Dropdowns</div>
                        <div class="percent">60%</div>
                      </div>
                      <div class="progress progress-striped progress-thin">
                        <div class="progress-bar progress-bar-amethyst" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 60%">
                          <span class="sr-only">60% Complete</span>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li><a href="#">Check all tasks <i class="fa fa-angle-right"></i></a></li>
                </ul>

              </li>

              <li class="dropdown divided">
                
                <a class="dropdown-toggle button" data-toggle="dropdown" href="#">
                  <i class="fa fa-envelope"></i>
                  <span class="label label-transparent-black">1</span>
                </a>

                <ul class="dropdown-menu wider arrow nopadding messages">
                  <li><h1>You have <strong>1</strong> new message</h1></li>
                  <li>
                    <a class="cyan" href="#">
                      <div class="profile-photo">
                        <img src="assets/images/ici-avatar.jpg" alt />
                      </div>
                      <div class="message-info">
                        <span class="sender">Ing. Imrich Kamarel</span>
                        <span class="time">12 mins</span>
                        <div class="message-content">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum</div>
                      </div>
                    </a>
                  </li>

                  <li>
                    <a class="green" href="#">
                      <div class="profile-photo">
                        <img src="assets/images/arnold-avatar.jpg" alt />
                      </div>
                      <div class="message-info">
                        <span class="sender">Arnold Karlsberg</span>
                        <span class="time">1 hour</span>
                        <div class="message-content">Lorem ipsum dolor sit amet, consectetur adipisicing elit</div>
                      </div>
                    </a>
                  </li>

                  <li>
                    <a href="#">
                      <div class="profile-photo">
                        <img src="assets/images/profile-photo.jpg" alt />
                      </div>
                      <div class="message-info">
                        <span class="sender">John Douey</span>
                        <span class="time">3 hours</span>
                        <div class="message-content">Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia</div>
                      </div>
                    </a>
                  </li>

                  <li>
                    <a class="red" href="#">
                      <div class="profile-photo">
                        <img src="assets/images/peter-avatar.jpg" alt />
                      </div>
                      <div class="message-info">
                        <span class="sender">Peter Kay</span>
                        <span class="time">5 hours</span>
                        <div class="message-content">Ut enim ad minim veniam, quis nostrud exercitation</div>
                      </div>
                    </a>
                  </li>

                  <li>
                    <a class="orange" href="#">
                      <div class="profile-photo">
                        <img src="assets/images/george-avatar.jpg" alt />
                      </div>
                      <div class="message-info">
                        <span class="sender">George McCain</span>
                        <span class="time">6 hours</span>
                        <div class="message-content">Lorem ipsum dolor sit amet, consectetur adipisicing elit</div>
                      </div>
                    </a>
                  </li>


                  <li class="topborder"><a href="#">Check all messages <i class="fa fa-angle-right"></i></a></li>
                </ul>

              </li>

              <li class="dropdown divided">
                
                <a class="dropdown-toggle button" data-toggle="dropdown" href="#">
                  <i class="fa fa-bell"></i>
                  <span class="label label-transparent-black">3</span>
                </a>

                <ul class="dropdown-menu wide arrow nopadding bordered">
                  <li><h1>You have <strong>3</strong> new notifications</h1></li>
                  
                  <li>
                    <a href="#">
                      <span class="label label-green"><i class="fa fa-user"></i></span>
                      New user registered.
                      <span class="small">18 mins</span>
                    </a>
                  </li>

                  <li>
                    <a href="#">
                      <span class="label label-red"><i class="fa fa-power-off"></i></span>
                      Server down.
                      <span class="small">27 mins</span>
                    </a>
                  </li>

                  <li>
                    <a href="#">
                      <span class="label label-orange"><i class="fa fa-plus"></i></span>
                      New order.
                      <span class="small">36 mins</span>
                    </a>
                  </li>

                  <li>
                    <a href="#">
                      <span class="label label-cyan"><i class="fa fa-power-off"></i></span>
                      Server restared.
                      <span class="small">45 mins</span>
                    </a>
                  </li>

                  <li>
                    <a href="#">
                      <span class="label label-amethyst"><i class="fa fa-power-off"></i></span>
                      Server started.
                      <span class="small">50 mins</span>
                    </a>
                  </li>

                   <li><a href="#">Check all notifications <i class="fa fa-angle-right"></i></a></li>
                </ul>

              </li>

              <li class="dropdown divided user" id="current-user">
                <div class="profile-photo">
                  <img src="assets/images/profile-photo.jpg" alt />
                </div>
                <a class="dropdown-toggle options" data-toggle="dropdown" href="#">
                  John Douey <i class="fa fa-caret-down"></i>
                </a>
                
                <ul class="dropdown-menu arrow settings">

                  <li>
                    
                    <h3>Backgrounds:</h3>
                    <ul id="color-schemes">
                      <li><a href="#" class="bg-1"></a></li>
                      <li><a href="#" class="bg-2"></a></li>
                      <li><a href="#" class="bg-3"></a></li>
                      <li><a href="#" class="bg-4"></a></li>
                      <li><a href="#" class="bg-5"></a></li>
                      <li><a href="#" class="bg-6"></a></li>
                    </ul>

                    <div class="form-group videobg-check">
                      <label class="col-xs-8 control-label">Video BG</label>
                      <div class="col-xs-4 control-label">
                        <div class="onoffswitch greensea small">
                          <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="videobg-check">
                          <label class="onoffswitch-label" for="videobg-check">
                            <span class="onoffswitch-inner"></span>
                            <span class="onoffswitch-switch"></span>
                          </label>
                        </div>
                      </div>
                    </div>

                  </li>

                  <li class="divider"></li>

                  <li>
                    <a href="#"><i class="fa fa-user"></i> Profile</a>
                  </li>

                  <li>
                    <a href="#"><i class="fa fa-calendar"></i> Calendar</a>
                  </li>

                  <li>
                    <a href="#"><i class="fa fa-envelope"></i> Inbox <span class="badge badge-red" id="user-inbox">3</span></a>
                  </li>

                  <li class="divider"></li>

                  <li>
                    <a href="#"><i class="fa fa-power-off"></i> Logout</a>
                  </li>
                </ul>
              </li>

              <li>
                <a href="#mmenu"><i class="fa fa-comments"></i></a>
              </li>
            </ul>
            <!-- /Quick Actions -->



            <!-- Sidebar -->
<ul class="nav navbar-nav side-nav" id="sidebar">
  
  <li class="collapsed-content"> 
    <ul>
      <li class="search"><!-- Collapsed search pasting here at 768px --></li>
    </ul>
  </li>

  <li class="navigation" id="navigation">
    <a href="#" class="sidebar-toggle" data-toggle="#navigation">功能导航</a>
    
    <ul class="menu">
      
      <!--li class="dropdown active">
        <a href="stockbar.html" class="dropdown-toggle" data-toggle="dropdown">
          股吧管理 <b class="fa fa-plus dropdown-plus"></b>
        </a>
        <ul class="dropdown-menu animated fadeInLeft">
          <li id="menu_stockbar-list">
            <a href="stockbar.list.html">
              <i class="fa fa-caret-right"></i> 股吧列表
            </a>
          </li>
          <li id="menu_stockbar-new">
            <a href="stockbar-new.html">
              <i class="fa fa-caret-right"></i> 新建股吧
            </a>
          </li>
        </ul>
      </li-->

             <li class="dropdown" id="menu_login">
        <a href="index.html" class="dropdown-toggle">
           后台首页 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>

      <li class="dropdown" id="menu_info">
        <a href="info.html" class="dropdown-toggle">
           资讯编辑 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>


      <li class="dropdown" id="menu_homepage">
        <a href="homepage.html" class="dropdown-toggle">
          首页推荐 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>


      <li class="dropdown" id="menu_postbar">
        <a href="postbar.html" class="dropdown-toggle">
           吧贴管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>

       <li class="dropdown" id="menu_user">
        <a href="user.html" class="dropdown-toggle">
          用户管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>



      <li class="dropdown" id="menu_infoadmin">
        <a href="infoadmin.html" class="dropdown-toggle">
           资讯管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>



      <li class="dropdown" id="menu_ability">
        <a href="abilitytag.html" class="dropdown-toggle">
          用户标签 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>



      <li class="dropdown active" id="menu_stockbar">
        <a href="stockbar.html" class="dropdown-toggle">
           股吧管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>

      <li class="dropdown" id="menu_stockbar">
        <a href="stockbarHYGN.html" class="dropdown-toggle">
           行业概念 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>

      
      <li class="dropdown" id="menu_report">
        <a href="report.html" class="dropdown-toggle">
           举报管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>


      <li class="dropdown" id="menu_drawmoney">
        <a href="drawmoney.html" class="dropdown-toggle">
           提款管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>

     
     <li class="dropdown" id="menu_fund">
        <a href="fundmanagement.html" class="dropdown-toggle">
           资金管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>

      <li class="dropdown" id="menu_stockdata">
        <a href="stockdata.html" class="dropdown-toggle">
           股票数据 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>

      <li class="dropdown" id="menu_app">
        <a href="appmanagement.html" class="dropdown-toggle">
           App管理 <b class="fa fa-plus dropdown-plus hide"></b>
        </a>
      </li>
    </ul>

  </li>

</ul>
<!-- Sidebar end -->





          </div>
          <!--/.nav-collapse -->





        </div>
        <!-- Fixed navbar end -->




        
        <!-- Page content -->
        <div id="content" class="col-md-12">
          

          <div class="pageheader">

            <h2><i class="fa fa-puzzle-piece" style="line-height: 48px;padding-left: 5px;"></i> 股吧管理 <span></span></h2>

          </div>



          <!-- content main container -->
          <div class="main">




            <!-- row -->
            <div class="row">

              <div class="col-md-12">


                <!-- tile -->
                <section class="tile color transparent-black">

                  <!-- tile header -->
                  <div class="tile-header" style="height:50px">
                    <div class="search" style="position: absolute;top: 10px;right: 15px;">
                      <input type="text" name="searchTitle" placeholder="请输入标题/内容">
                      <button type="button" data-click="searchType" data-value="1" class="btn btn-default">搜索</button>
                      <button type="button" data-click="addType" data-value="2" class="btn btn-default">+</button>
                    </div>
                  </div>
                  <!-- /tile header -->

                  <!-- tile widget -->
                  <div class="tile-widget bg-transparent-black-2">
                    <div class="row">
                      
                      <div class="col-sm-1 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select form-control">
                            <option value="5">全部</option>
                            <option value="1">沪深</option>
                            <option value="2">港股</option>
                            <option value="3">美股</option>
                            <option value="4">综合</option>
                          </select>
                        </div>
                      </div>

                      <div class="col-sm-4 col-xs-6" style="height:30px">
                        <div class="radio radio-transparent" style="display:inline-block;">
                          <input type="radio" tag="screen" name="type" id="screen_type_1" value="0">
                          <label for="screen_type_1">按发帖数排序</label>
                        </div>
                        <div class="radio radio-transparent" style="display:inline-block;">
                          <input type="radio" tag="screen" name="type" id="screen_type_2" value="0">
                          <label for="screen_type_2">按回复数排序</label>
                        </div>
                    </div>

                      

                    </div>
                  </div>
                  <!-- /tile widget -->



                  <!-- tile body -->
                  <div class="tile-body nopadding" id="mod_info"></div>
                  <!-- /tile body -->


                  <!-- tile footer -->
                  <div class="tile-footer bg-transparent-black-2 rounded-bottom-corners">
                    <div class="row">  

                      <div class="col-sm-12 text-center sm-center">
                        <ul class="pagination pagination-xs nomargin pagination-custom">
                        </ul>
                      </div>

                    </div>
                  </div>
                  <!-- /tile footer -->
                  
                


                </section>
                <!-- /tile -->

              </div>
            </div>
            <!-- /row -->
          


          </div>
          <!-- /content container -->






        </div>
        <!-- Page content end -->

      </div>
      <!-- Make page fluid-->




    </div>



    <div class="modal fade" id="edit_modal" tabindex="-1" role="dialog" aria-labelledby="modalDialogLabel" aria-hidden="true" style="display: none;">
      <div class="modal-dialog" style="width: 40%;margin-right:30%; margin-left:30%;">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">关闭</button>
            <h3 class="modal-title" id="modalDialogLabel"><a href="" target="blank">股吧修改</a></h3>
          </div>
          <div class="modal-body">
            <form class="form-horizontal" role="form">
                          
              <!--div class="form-group">
                <label for="edit_type" class="col-sm-4 control-label">分类</label>
                <div class="col-sm-2">
                  <input type="text" class="form-control" value="" name="type" id="edit_type">
                </div>
                <div class="col-sm-5">请填写数字(1:A股 2:港股 3:美股 4:综合）</div>
              </div-->

              <div class="form-group type-select">
                <label for="edit_type" class="col-sm-4 control-label">股吧类型</label>
                      <div class="col-sm-2 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select-edit-type form-control">
                            <option value="1">A股</option>
                            <option value="2">港股</option>
                            <option value="3">美股</option>
                            <!--option value="4">综合</option-->
                          </select>
                        </div>
                      </div>
              </div>

              <div class="form-group">
                <label for="edit_title" class="col-sm-4 control-label">股吧名称</label>
                <div class="col-sm-3">
                  <input type="text" class="form-control" value="" name="title" id="edit_title">
                </div>
              </div>
              <div class="form-group">
                <label for="edit_en_title" class="col-sm-4 control-label">翻译名</label>
                <div class="col-sm-5">
                  <input type="text" class="form-control" value="" name="en_title" id="edit_en_title">
                </div>
              </div>

              <div class="form-group">
                <label for="edit_code" class="col-sm-4 control-label">代码</label>
                <div class="col-sm-3">
                  <input type="text" class="form-control" value="" name="code" id="edit_code">
                </div>
              </div>

              <div class="form-group">
                <label for="edit_abbrev" class="col-sm-4 control-label">拼音首字母</label>
                <div class="col-sm-3">
                  <input type="text" class="form-control" value="" name="abbrev" id="edit_abbrev">
                </div>
              </div>

              <div class="form-group">
                <label for="edit_spell" class="col-sm-4 control-label">全拼</label>
                <div class="col-sm-3">
                  <input type="text" class="form-control" value="" name="spell" id="edit_spell">
                </div>
              </div>

              <div class="form-group">
                <label for="edit_state" class="col-sm-4 control-label">状态</label>
                <div class="col-sm-2">
                  <input type="text" class="form-control" value="" name="state" id="edit_state">
                </div>
                <div class="col-sm-6">请填写数字(0:已删除 1:交易中 2:停牌中 3:已退市4:未上市）</div>
              </div>

              <div class="form-group type-select">
                <label for="edit_typedetail_gbnx" class="col-sm-4 control-label">股吧类型</label>
                      <div class="col-sm-2 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select-creat-gbnx form-control">
                            <option value="0">不区分</option>
                            <option value="1">普通</option>
                            <option value="2">综合</option>
                          </select>
                        </div>
                      </div>
              </div>

              <div class="form-group type-select" id="chosen-select-creat-jys-A">
                <label for="edit_typedetail_jys" class="col-sm-4 control-label">交易所</label>
                      <div class="col-sm-2 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select-creat-jys-A form-control">
                            <option value="0">不区分</option>
                            <option value="1">深交所</option>
                            <option value="2">上交所</option>
                          </select>
                        </div>
                      </div>      
              </div>

              <div class="form-group type-select" id="chosen-select-creat-jys-HK">
                <label for="edit_typedetail_jys" class="col-sm-4 control-label">交易所</label>
                      <div class="col-sm-2 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select-creat-jys-HK form-control" >
                            <option value="0">不区分</option>
                            <option value="1">港交所</option>
                          </select>
                        </div>
                      </div>      
              </div>

              <div class="form-group type-select" id="chosen-select-creat-jys-US">
                <label for="edit_typedetail_jys" class="col-sm-4 control-label">交易所</label>
                      <div class="col-sm-2 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select-creat-jys-US form-control" >
                            <option value="0">不区分</option>
                            <option value="1">纽交所</option>
                            <option value="2">拉斯达克</option>
                            <option value="3">美交所</option>
                          </select>
                        </div>
                      </div>      
              </div>

              <div class="form-group type-select">
                <label for="edit_typedetail_bk" class="col-sm-4 control-label">板块</label>
                      <div class="col-sm-2 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select-creat-bk form-control">
                            <option value="0">不区分</option>
                            <option value="1">主板</option>
                            <option value="2">创业板</option>
                          </select>
                        </div>
                      </div>      
              </div>

              <div class="form-group type-select">
                <label for="edit_typedetail_nx" class="col-sm-4 control-label">类型</label>
                      <div class="col-sm-2 col-xs-6">
                        <div class="input-group table-options">
                          <select class="chosen-select-creat-nx form-control">
                            <option value="0">不区分</option>
                            <option value="1">股票</option>
                            <option value="2">指数</option>
                          </select>
                        </div>
                      </div>      
              </div>


              <div class="form-group form-footer">
                <div class="col-sm-offset-4 col-sm-8">
                  <button type="button" data-click="cancelType" data-value="0"  class="btn btn-default">取消</button>
                  <button type="button" data-click="saveType" data-value="1"  class="btn btn-default">保存</button>
                </div>
              </div>

             </form>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div>
    <!-- Wrap all page content end -->

    <!--a data-click="barManager" data-id="{{id}}" href="#">吧主</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
          <a data-click="introduce" data-id="{{id}}" href="#">简介</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
          <a data-click="lock" data-id="{{id}}" href="#">锁定</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
          <a data-click="hide" data-id="{{id}}" href="#">隐藏</a-->

    <section class="videocontent" id="video"></section>

<script type="text/tpl" id="tpl_stockbar">
  
  <table class="table table-bordered table-sortable">
    <thead>
      <tr>
        <th>ID</th>
        <th>分类</th>
        <th>代码</th>
        <th>股吧名</th>
        <th>最后发帖(未排序)</th>
        <th>今日主贴</th>
        <th>今日回复</th>
        <th style="width:250px;">操作</th>
      </tr>
    </thead>
    <tbody>
      {{#list}}
      <tr>
        <td>{{id}}</td>
        <td>{{market}}</td>
        <td>{{code}}</td>
        <td>{{name}}</td>
        <td>{{lastPost}}</td>
        <td>{{todayPost}}</td>
        <td>{{todayResp}}</td>
        <td>
          <a data-click="barManager" data-id="{{id}}" href="#">更新</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;
          <a data-click="delManager" data-id="{{id}}" href="#">删除</a>
        </td>
      </tr>
      {{/list}}
    </tbody>
  </table>

</script>

    <script src="js/core.js"></script> 
    <script src="js/extend.js"></script> 
    <script src="assets/vendor/mmenu/js/jquery.mmenu.min.js"></script>
    <script src="assets/vendor/sparkline/jquery.sparkline.min.js"></script>
    <script src="assets/vendor/nicescroll/jquery.nicescroll.min.js"></script>
    <script src="/assets/vendor/chosen/chosen.jquery.min.js"></script>
    <script src="/assets/vendor/momentjs/moment-with-langs.min.js"></script>
    <script src="/assets/vendor/datepicker/bootstrap-datetimepicker.min.js"></script>
    <script src="/assets/vendor/pagination/pagination.js"></script>
    <script src="/assets/js/vendor/summernote/summernote.min.js"></script>

    <script>
+function() {
  var queryConfig = {
    type: 5,
    curpage: 1,
    pagenum: 10,
    user_id: '',
    pagename : "stockbar",
    order : 1,
    id : ''
  };

  var stockType = {
    type: 1,
    gubaneixing: 0,
    daqu: 0,
    jiaoyisuo: 0,
    bankuai: 0,
    neixing: 0,
    stockClass: 0
  }

  var mapToAdmin = {
  };

  var mapToMarket = {
    '1': '沪深',
    '2': '港股',
    '3': '美股',
    '4': '综合',
    '5': '综合(废弃)'
  };

  var mapToState = {
    '0': '已删除',
    '1': '交易中',
    '2': '停牌中',
    '3': '已退市'
  };

  var saveData = {};

  var dataList = [];
  var dataListTemp = [];

  var searchKey = '';
  var $container = $('#mod_info');
  var BASE_URL = 'http://120.132.58.49/stock/index.php/Home/';

  $(function(){

      //check all checkboxes
      $('table thead input[type="checkbox"]').change(function () {
        $(this).parents('table').find('tbody input[type="checkbox"]').prop('checked', $(this).prop('checked'));
      });

      // sortable table
      $('.table.table-sortable th.sortable').click(function() {
        var o = $(this).hasClass('sort-asc') ? 'sort-desc' : 'sort-asc';
        $(this).parents('table').find('th.sortable').removeClass('sort-asc').removeClass('sort-desc');
        $(this).addClass(o);
      });

      //chosen select input
      $(".chosen-select").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        queryConfig.type = $this.val();
        loadData();

      });

      $(".chosen-select-creat-gbnx").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        stockType.gubaneixing = $this.val();
      });

      $(".chosen-select-edit-type").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        stockType.type = $this.val();
        if(stockType.type == "1"){
          $("#chosen-select-creat-jys-A").show();
          $("#chosen-select-creat-jys-HK").hide();
          $("#chosen-select-creat-jys-US").hide();
        }else if(stockType.type == "2"){
          $("#chosen-select-creat-jys-A").hide();
          $("#chosen-select-creat-jys-HK").show();
          $("#chosen-select-creat-jys-US").hide();
        }else if(stockType.type == "3"){
          $("#chosen-select-creat-jys-A").hide();
          $("#chosen-select-creat-jys-HK").hide();
          $("#chosen-select-creat-jys-US").show();
        }
      });

      $(".chosen-select-creat-jys-A").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        stockType.jiaoyisuo = $this.val();
      });

      $(".chosen-select-creat-jys-HK").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        stockType.jiaoyisuo = $this.val();
      });

      $(".chosen-select-creat-jys-US").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        stockType.jiaoyisuo = $this.val();
      });

      $(".chosen-select-creat-bk").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        stockType.bankuai = $this.val();
      });

      $(".chosen-select-creat-nx").chosen({disable_search_threshold: 10}).on('change', function () {
        var $this = $(this);
        stockType.neixing = $this.val();
      });      

      

      $("#screen_type_1").on('click', function () {
        queryConfig.order = 1;
        loadData();
      });

      $("#screen_type_2").on('click', function () {
        queryConfig.order = 2;
        loadData();
      });


      //check toggling
      $('.check-toggler').on('click', function(){
        $(this).toggleClass('checked');
      });
      M.controller.add('ignoreType', function (ev) {
        ev.preventDefault();

        var $parent = $(this).parent();
        $parent.find('.btn-primary').removeClass('btn-primary').addClass('btn-default');
        $(this).addClass('btn-primary').removeClass('btn-default');
         
        //获取保持前状态
        if(saveData.id){
          $.post(CONST.baseUrl + "NewsInfoBak/update", {
            id: saveData.id,
            state : 3,
            retreat : 1
          }, 'json').done(function (res) {
              if (res.code != 0) {
                return alert('操作失败，请稍后再试~');
              }else{
                alert('退回成功~');
                return window.location.reload(true);
              } 

            }).fail(function () {
              alert('操作失败，请稍后再试~');
            });
        }else{
          alert('操作失败，请稍后再试~');
        }
      });

      M.controller.add('saveType', function (ev) {
        ev.preventDefault();

        var $parent = $(this).parent();
        $parent.find('.btn-primary').removeClass('btn-primary').addClass('btn-default');
        $(this).addClass('btn-primary').removeClass('btn-default');

        //type = $(".col-sm-2 input[name='type']").val(),
        var type = stockType.type,
        name = $(".col-sm-3 input[name='title']").val(),
        code = $(".col-sm-3 input[name='code']").val(),
        abbrev = $(".col-sm-3 input[name='abbrev']").val(),
        spell = $(".col-sm-3 input[name='spell']").val(),
        state = $(".col-sm-2 input[name='state']").val();
        en_title = $(".col-sm-5 input[name='en_title']").val();

        if(queryConfig.id > 0){
          var param = {id:queryConfig.id, name: name, code:code, abbrev:abbrev, spell:spell, state:state, en_title:en_title};
        }else{
          getClass(type);
          var param = {id:queryConfig.id, type: type, name: name, code:code, abbrev:abbrev, spell:spell, state:state, en_title:en_title, classtype:stockType.stockClass};
        }
        
          $.getJSON(CONST.baseUrl + 'StockBar/saveStockBar', param).done(function (res) {
            if (res.code !== 0) {
              //return tips('服务器繁忙，请稍后再试~~');
              alert("服务器繁忙，请稍后再试~~");
            }else{ 
              alert('保存成功~');
              return window.location.reload(true);
            }

          }).fail(function () {
            //tips('服务器繁忙，请稍后再试~~');
            alert("服务器繁忙，请稍后再试~~");
          });
      });


      M.controller.add('cancelType', function (ev) {
        //$("#edit_modal").remove();
        return window.location.reload(true);
      });


      M.controller.add('barManager', function (ev) {
       //alert("功能待完善, 不要着急, 先喝杯水休息一下！");
         ev.preventDefault();
          

         var $modal = $('#edit_modal'),
            idx = $(this).parent().closest('tr').index(),
            data = dataList[idx],
            editProp = {
              title: 'text',
              en_title: 'text',
              source: 'text',
              type: 'radio',
              index_recom_state: 'checkbox',
              sticky_state: 'checkbox',
              essential_state: 'checkbox',
              content: 'div'
              //content: 'textarea'
            };

          saveData = data;

          var $this = $(this);
          queryConfig.id = $this.data('id');
          for (var i = 0; i < dataListTemp.length; i++) {
            if(dataListTemp[i].id == queryConfig.id){
              $(".col-sm-2 input[name='type']").val(dataListTemp[i].type);
              $(".col-sm-3 input[name='title']").val(dataListTemp[i].name);
              $(".col-sm-5 input[name='en_title']").val(dataListTemp[i].eng_name);
              $(".col-sm-3 input[name='code']").val(dataListTemp[i].code);
              $(".col-sm-3 input[name='abbrev']").val(dataListTemp[i].abbrev);
              $(".col-sm-3 input[name='spell']").val(dataListTemp[i].spell);
              $(".col-sm-2 input[name='state']").val(dataListTemp[i].state);
            }
          };
          
          $modal.modal();
          $(".type-select").hide();
      });

      M.controller.add('delManager', function (ev) {
       //alert("功能待完善, 不要着急, 先喝杯水休息一下！");
         ev.preventDefault();
         var $this = $(this);
         queryConfig.id = $this.data('id'); 
         if(confirm("确定要删除该股吧吗？")){
            delStockBar();
          }else{
            alert("未删除! ");
          } 
         
      });


      M.controller.add('searchType', function (ev) {
       //alert("功能待完善, 不要着急, 先喝杯水休息一下! ");
        ev.preventDefault();

        queryConfig.curpage = 1;

        searchNews();
      });

      M.controller.add('addType', function (ev) {
        ev.preventDefault();

        var $modal = $('#edit_modal'),
            idx = $(this).parent().closest('tr').index(),
            data = dataList[idx],
            editProp = {
              title: 'text',
              en_title: 'text',
              source: 'text',
              type: 'radio',
              index_recom_state: 'checkbox',
              sticky_state: 'checkbox',
              essential_state: 'checkbox',
              content: 'div'
              //content: 'textarea'
            };

          $(".col-sm-2 input[name='type']").val("");
          $(".col-sm-3 input[name='title']").val("");
          $(".col-sm-5 input[name='en_title']").val("");
          $(".col-sm-3 input[name='code']").val("");
          $(".col-sm-3 input[name='abbrev']").val("");
          $(".col-sm-3 input[name='spell']").val("");
          $(".col-sm-2 input[name='state']").val("");
          $(".type-select").show();            
          $modal.modal();

          $("#chosen-select-creat-jys-HK").hide();
          $("#chosen-select-creat-jys-US").hide();
      });

      loadData();
  });

  function getClass(type){
        stockType.stockClass = stockType.gubaneixing*10000 + type*1000 + stockType.jiaoyisuo * 100 + stockType.bankuai*10 + stockType.neixing;
  }

  function tips (text) {
      $('.pagination').html('');
      $container.html('<h4 style="text-align:center;line-height:100px;">' + text + '</h4>');
      //$("#mod_admin_id").html('<h4 style="text-align:center;line-height:100px;">' + text + '</h4>');
  }

  function searchNews() {
    //标题
      strTitle = $(".search input[name='searchTitle']").val();

      $.post(CONST.baseUrl + 'StockBar/search', {  
          value : strTitle,
          type : queryConfig.type,
          curpage : queryConfig.curpage,
          pagenum : queryConfig.pagenum
      }, 'json').done(function (res) {
          if (res.code !== 0) {
            return alert('操作失败，请稍后再试~');
          }else{
         
            dataList = res.data.list;
            dataListTemp = dataList;
            if (!dataList.length) {
              return tips('没有数据哦~~~');
            }

            var $pagination = $('.pagination');
            $pagination.pagination({
              items: res.data.count,
              itemsOnPage: queryConfig.pagenum,
              onPageClick: function (page) {
                queryConfig.curpage = page;
                loadData();
              },
              currentPage: queryConfig.curpage
            });

            var tpl = Handlebars.compile($('#tpl_stockbar').html());
            dataList.forEach(function (obj, idx) {
              obj.market = mapToMarket[obj.type];
            });
            $container.html(tpl({
              list: dataList 
            }));
        }  

      }).fail(function () {
        alert('操作失败，请稍后再试~');
      }).always(function () {
        M.loader.hide();
      });

      M.loader.show();
  }

  function delStockBar() {
    $.getJSON(CONST.baseUrl + 'StockBar/delStockBar', queryConfig).done(function (res) {
      if (res.code == 20401) {
        alert("请登录后查看数据~~");
        window.location.href="/login.html";
      }else if (res.code == 20402) {
        alert("你的权限不够，如有需要请联系管理员~~");
        window.location.href="/info.html";
      }else{
              
          dataList = res.data.list;

          if (dataList==0) {
            alert('操作失败，请稍后再试~~~');
          }else{
            alert('删除成功~');
          }
          loadData();
      }
    }).fail(function () {
      tips('服务器繁忙，请稍后再试~~');
    });
  }

  function loadData () {

    $.getJSON(CONST.baseUrl + 'StockBar/getStock', queryConfig).done(function (res) {
      if (res.code == 20401) {
        alert("请登录后查看数据~~");
        window.location.href="/login.html";
      }else if (res.code == 20402) {
        alert("你的权限不够，如有需要请联系管理员~~");
        window.location.href="/info.html";
      }else{
              
          dataList = res.data.list;
          dataListTemp = dataList;

          if (res.data.count == 0) {
            return tips('没有回复数据记录哦~~~');
          }

          var $pagination = $('.pagination');

          $pagination.pagination({
            items: res.data.count,
            itemsOnPage: queryConfig.pagenum,
            onPageClick: function (page) {
              queryConfig.curpage = page;
              loadData();
            },
            currentPage: queryConfig.curpage
          });


          var tpl = Handlebars.compile($('#tpl_stockbar').html());
          dataList.forEach(function (obj, idx) {
            obj.market = mapToMarket[obj.type];
          });

          $container.html(tpl({
            list: dataList 
          }));

      }
    }).fail(function () {
      tips('服务器繁忙，请稍后再试~~');
    }).always(function(){
      if(queryConfig.id > 0){
        $(".type-select").hide();
      }else{
        $(".chosen-container-single").attr("style","width : 100px");
        $(".chosen-single").attr("style","width : 100px");
      }
    });
  }

}();
      
    </script>
  </body>
</html>
      
